package br.ufu.facom.lascam.coverageexploiter;

import br.ufu.facom.lascam.coverageexploiter.analytics.CoverageMetrics;
import br.ufu.facom.lascam.coverageexploiter.extractor.ApiExtractor;
import br.ufu.facom.lascam.coverageexploiter.extractor.ExtractorFromJavaDoc;
import br.ufu.facom.lascam.coverageexploiter.posts.PostsRetriever;
import br.ufu.facom.lascam.coverageexploiter.posts.model.classifier.Pair;
import br.ufu.facom.lascam.coverageexploiter.util.Constants;

import java.util.List;

/**
 * Created by Klerisson on 02/09/2014.
 */
public class Main {

    public static void main(String[] args){

        try {

            PostsRetriever postsRetriever = new PostsRetriever();
            List<Pair> postsPair = postsRetriever.fetchPosts();
            postsRetriever.parseBodies();
            System.out.println(postsPair.size());

            ApiExtractor extractor = new ExtractorFromJavaDoc(Constants.JAVADOC_PATH,"javax.swing");
            extractor.extract();
            System.out.println(extractor.getClassesToMethodsMap().entrySet().size());

            CoverageMetrics cs = new CoverageMetrics(postsPair, extractor);
            cs.evaluate();

        } catch (Exception e){
            System.out.println("Application fail!");
            e.printStackTrace();
        }
    }

}
