package br.ufu.facom.lascam.coverageexploiter.evaluation;

import br.ufu.facom.lascam.coverageexploiter.parser.model.CitedElements;
import br.ufu.facom.lascam.coverageexploiter.posts.model.classifier.Pair;

/**
 * CaptureParsedSnippets.aj captures snippets after being parsed in order to
 * send to SnippetsForEvaluation.java.
 * <p>
 * Created by Fer Madeiral on 21/11/2014.
 */
public aspect CaptureParsedSnippets {

	pointcut parsedSnippet(String snippet) :
		execution(CitedElements br.ufu.facom.lascam.coverageexploiter.parser.impl.RegexJavaAnalyser.parseSnippet(String)) &&
		cflow(execution(void br.ufu.facom.lascam.coverageexploiter.analytics.CoverageMetrics.doTheWork(Pair))) &&
		args(snippet);

	after(String snippet) returning() : parsedSnippet(snippet) {
		SnippetsForEvaluation.getInstance().add(snippet);
	}
}